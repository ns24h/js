﻿/*! Related Posts */
var randomRelatedIndex,showRelatedPost;!function(t,e,a){var l={widgetTitle:"",homePage:"/",numPosts:3,callBack:function(){}};for(var s in relatedPostConfig)l[s]="undefined"==relatedPostConfig[s]?l[s]:relatedPostConfig[s];var i=function(t){var l=e.createElement("script");l.type="text/javascript",l.src=t,a.appendChild(l)},r=function(t){var e,a,l=t.length;if(0===l)return!1;for(;--l;)e=Math.floor(Math.random()*(l+1)),a=t[l],t[l]=t[e],t[e]=a;return t},n="object"==typeof labelArray&&labelArray.length>0?"/-/"+r(labelArray)[0]:"";randomRelatedIndex=function(t){var e,a,s=t.feed.openSearch$totalResults.$t-l.numPosts,r=(e=1,a=s>0?s:1,Math.floor(Math.random()*(a-e+1))+e);i(l.homePage.replace(/\/$/,"")+"/feeds/posts/summary"+n+"?alt=json-in-script&orderby=updated&start-index="+r+"&max-results="+l.numPosts+"&callback=showRelatedPost")},showRelatedPost=function(t){var e,a,s,i,n,m=document.getElementById(l.containerId),o=r(t.feed.entry),d=l.widgetStyle,h=l.widgetTitle+'<ul class="related-post-style-'+d+'">',c=l.newTabLink?' target="_blank"':"",p='<span style="display:block;clear:both;"></span>';if(m){for(var u=0;u<l.numPosts&&u!=o.length;u++){a=o[u].title.$t,s="auto"!==l.titleLength&&l.titleLength<a.length?a.substring(0,l.titleLength)+"&hellip;":a,i="media$thumbnail"in o[u]&&!1!==l.thumbnailSize?o[u].media$thumbnail.url.replace(/\/s[0-9]+(\-c)?/,"/s"+l.thumbnailSize+"-c"):l.noImage,n="summary"in o[u]&&l.summaryLength>0?o[u].summary.$t.replace(/<br ?\/?>/g," ").replace(/<.*?>/g,"").replace(/[<>]/g,"").substring(0,l.summaryLength)+"&hellip;":"";for(var g=0,b=o[u].link.length;g<b;g++)e="alternate"==o[u].link[g].rel?o[u].link[g].href:"#";h+=2==d?'<li><img alt="" class="related-post-item-thumbnail" src="'+i+'" width="'+l.thumbnailSize+'" height="'+l.thumbnailSize+'"><a class="related-post-item-title" title="'+a+'" href="'+e+'"'+c+">"+s+'</a><span class="related-post-item-summary"><span class="related-post-item-summary-text">'+n+'</span> <a href="'+e+'" class="related-post-item-more"'+c+">"+l.moreText+"</a></span>"+p+"</li>":3==d||4==d?'<li class="related-post-item" tabindex="0"><a class="related-post-item-title" href="'+e+'"'+c+'><img alt="" class="related-post-item-thumbnail" src="'+i+'" width="'+l.thumbnailSize+'" height="'+l.thumbnailSize+'"></a><div class="related-post-item-tooltip"><a class="related-post-item-title" title="'+a+'" href="'+e+'"'+c+">"+s+"</a></div>"+p+"</li>":5==d?'<li class="related-post-item" tabindex="0"><a class="related-post-item-wrapper" href="'+e+'" title="'+a+'"'+c+'><img alt="" class="related-post-item-thumbnail" src="'+i+'" width="'+l.thumbnailSize+'" height="'+l.thumbnailSize+'"><span class="related-post-item-tooltip">'+s+"</span></a>"+p+"</li>":6==d?'<li><a class="related-post-item-title" title="'+a+'" href="'+e+'"'+c+">"+s+'</a><div class="related-post-item-tooltip"><img alt="" class="related-post-item-thumbnail" src="'+i+'" width="'+l.thumbnailSize+'" height="'+l.thumbnailSize+'"><span class="related-post-item-summary"><span class="related-post-item-summary-text">'+n+"</span></span>"+p+"</div></li>":'<li><a title="'+a+'" href="'+e+'"'+c+">"+s+"</a></li>"}m.innerHTML=h+="</ul>"+p,l.callBack()}},i(l.homePage.replace(/\/$/,"")+"/feeds/posts/summary"+n+"?alt=json-in-script&orderby=updated&max-results=0&callback=randomRelatedIndex")}(window,document,document.getElementsByTagName("head")[0]);